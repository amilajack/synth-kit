<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>units.js - Postman Documentation</title>

    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/ionicons.min.css">
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>
<body>

<input type="checkbox" id="nav-trigger" class="nav-trigger" />
<label for="nav-trigger" class="navicon-button x">
  <div class="navicon"></div>
</label>

<label for="nav-trigger" class="overlay"></label>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Modules</h3><ul><li><a href="module-buffers.html">buffers</a><ul class='methods'><li data-type='method'><a href="module-buffers.html#.gen">gen</a></li><li data-type='method'><a href="module-buffers.html#.sample">sample</a></li><li data-type='method'><a href="module-buffers.html#.source">source</a></li><li data-type='method'><a href="module-buffers.html#.white">white</a></li></ul></li><li><a href="module-context.html">context</a><ul class='methods'><li data-type='method'><a href="module-context.html#.after">after</a></li><li data-type='method'><a href="module-context.html#.context">context</a></li><li data-type='method'><a href="module-context.html#.dest">dest</a></li><li data-type='method'><a href="module-context.html#.now">now</a></li><li data-type='method'><a href="module-context.html#.samplingRate">samplingRate</a></li><li data-type='method'><a href="module-context.html#.timeToSamples">timeToSamples</a></li><li data-type='method'><a href="module-context.html#.when">when</a></li></ul></li><li><a href="module-effects.html">effects</a><ul class='methods'><li data-type='method'><a href="module-effects.html#.convolve">convolve</a></li><li data-type='method'><a href="module-effects.html#.decayIR">decayIR</a></li><li data-type='method'><a href="module-effects.html#.delay">delay</a></li><li data-type='method'><a href="module-effects.html#.dly">dly</a></li><li data-type='method'><a href="module-effects.html#.feedback">feedback</a></li><li data-type='method'><a href="module-effects.html#.mix">mix</a></li><li data-type='method'><a href="module-effects.html#.reverb">reverb</a></li><li data-type='method'><a href="module-effects.html#.tremolo">tremolo</a></li></ul></li><li><a href="module-envelopes.html">envelopes</a><ul class='methods'><li data-type='method'><a href="module-envelopes.html#.adsr">adsr</a></li><li data-type='method'><a href="module-envelopes.html#.freqEnv">freqEnv</a></li><li data-type='method'><a href="module-envelopes.html#.perc">perc</a></li></ul></li><li><a href="module-filters.html">filters</a><ul class='methods'><li data-type='method'><a href="module-filters.html#.bandpass">bandpass</a></li><li data-type='method'><a href="module-filters.html#.filter">filter</a></li><li data-type='method'><a href="module-filters.html#.hipass">hipass</a></li><li data-type='method'><a href="module-filters.html#.lowpass">lowpass</a></li></ul></li><li><a href="module-instruments.html">instruments</a><ul class='methods'><li data-type='method'><a href="module-instruments.html#.inst">inst</a></li></ul></li><li><a href="module-load.html">load</a><ul class='methods'><li data-type='method'><a href="module-load.html#.decodeAudio">decodeAudio</a></li><li data-type='method'><a href="module-load.html#.fetch">fetch</a></li><li data-type='method'><a href="module-load.html#.load">load</a></li></ul></li><li><a href="module-oscillators.html">oscillators</a><ul class='methods'><li data-type='method'><a href="module-oscillators.html#.lfo">lfo</a></li><li data-type='method'><a href="module-oscillators.html#.osc">osc</a></li><li data-type='method'><a href="module-oscillators.html#.saw">saw</a></li><li data-type='method'><a href="module-oscillators.html#.sine">sine</a></li><li data-type='method'><a href="module-oscillators.html#.square">square</a></li><li data-type='method'><a href="module-oscillators.html#.triangle">triangle</a></li></ul></li><li><a href="module-routing.html">routing</a><ul class='methods'><li data-type='method'><a href="module-routing.html#.add">add</a></li><li data-type='method'><a href="module-routing.html#.conn">conn</a></li></ul></li><li><a href="module-signals.html">signals</a><ul class='methods'><li data-type='method'><a href="module-signals.html#.bypass">bypass</a></li><li data-type='method'><a href="module-signals.html#.constant">constant</a></li><li data-type='method'><a href="module-signals.html#.gain">gain</a></li><li data-type='method'><a href="module-signals.html#.mult">mult</a></li><li data-type='method'><a href="module-signals.html#.scale">scale</a></li><li data-type='method'><a href="module-signals.html#.signal">signal</a></li></ul></li><li><a href="module-synths.html">synths</a><ul class='methods'><li data-type='method'><a href="module-synths.html#.bank">bank</a></li><li data-type='method'><a href="module-synths.html#.subtractive">subtractive</a></li><li data-type='method'><a href="module-synths.html#.vca">vca</a></li><li data-type='method'><a href="module-synths.html#.vcf">vcf</a></li><li data-type='method'><a href="module-synths.html#.withDefaults">withDefaults</a></li></ul></li><li><a href="module-units.html">units</a><ul class='methods'><li data-type='method'><a href="module-units.html#.dBToGain">dBToGain</a></li><li data-type='method'><a href="module-units.html#.gainToDb">gainToDb</a></li><li data-type='method'><a href="module-units.html#.levelToGain">levelToGain</a></li><li data-type='method'><a href="module-units.html#.midiToFreq">midiToFreq</a></li><li data-type='method'><a href="module-units.html#.noteToFreq">noteToFreq</a></li><li data-type='method'><a href="module-units.html#.tempoToFreq">tempoToFreq</a></li></ul></li></ul>
</nav>

<div id="main">
    
    <h1 class="page-title">units.js</h1>
    

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/**
 * This module provides some conversion utilities between different units
 * used when dealing with audio
 *
 * @example
 * import { noteToFreq } from 'synth-kit'
 *
 * noteToFreq('A4') // => 440
 * @module units
 */
import Note from 'note-parser'
var pow = Math.pow

/**
 * Convert from note midi number to frequency
 * @param {Number} midi - the midi note number (can have decimals)
 * @param {Number} tuning - (Optional) the frequency of a reference A4 note (440 by default)
 * @return {Number} the note frequency
 * @example
 * midiToFreq(69) // => 440
 * midiToFreq(69.5) // => 452.8929841231365
 * midiToFreq(70) // => 466.1637615180899
 */
export function midiToFreq (value, base) { return pow(2, (+value - 69) / 12) * (base || 440) }

/**
 * Convert from note name to frequency
 * @function
 * @param {String} note - the note name
 * @param {Number} tuning - (Optional) the tuning of A4 (440 by default)
 * @return {Number} the note frequency
 * @example
 * noteToFreq('C3') // => 130.8127826502993
 */
export var noteToFreq = Note.freq

/**
 * Convert from beats per minute to hertzs
 *
 * @param {Integer} bpm - the tempo
 * @param {Integer} sub - (Optional) subdivision (default 1)
 * @return {Float} the tempo expressed in hertzs
 * @example
 * tempoToFreq(120) // => 2
 * tempoToFreq(120, 4) // => 8
 */
export function tempoToFreq (bpm, sub) { return (bpm / 60) * (sub || 1) }

/**
 * Convert decibels into gain.
 * @param  {Number} db
 * @return {Number} the gain (from 0 to 1)
 * @example
 * dBToGain(-3) // => 0.7071067811865475
 */
export function dBToGain (db) { return pow(2, db / 6) }

/**
 * Convert from level (an equal power scale from 0 to 100) into gain.
 * @param {Number} level - from 0 to 100
 * @return {Number} gain (from 0 to 1)
 * @example
 * levelToGain(80) // => 0.9510565162951535
 */
export function levelToGain (level) { return Math.sin(0.5 * Math.PI * level / 100) }

/**
 * Convert gain to decibels.
 * @param  {Number} gain (0-1)
 * @return {Decibels}
 * @example
 * s.gainToDb(0.3) // => -10.457574905606752
 */
export function gainToDb (gain) { return 20 * (Math.log(gain) / Math.LN10) }
</code></pre>
        </article>
    </section>




</div>

<br class="clear">

<footer>
    Documentation generated at Mon Nov 14 2016 12:23:13 GMT+0100 (CET)
</footer>

<script>prettyPrint();</script>
<script src="scripts/linenumber.js"></script>
</body>
</html>
