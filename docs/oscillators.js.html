<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>oscillators.js - Postman Documentation</title>

    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/ionicons.min.css">
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>
<body>

<input type="checkbox" id="nav-trigger" class="nav-trigger" />
<label for="nav-trigger" class="navicon-button x">
  <div class="navicon"></div>
</label>

<label for="nav-trigger" class="overlay"></label>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Modules</h3><ul><li><a href="module-buffers.html">buffers</a><ul class='methods'><li data-type='method'><a href="module-buffers.html#.gen">gen</a></li><li data-type='method'><a href="module-buffers.html#.sample">sample</a></li><li data-type='method'><a href="module-buffers.html#.source">source</a></li><li data-type='method'><a href="module-buffers.html#.white">white</a></li></ul></li><li><a href="module-context.html">context</a><ul class='methods'><li data-type='method'><a href="module-context.html#.after">after</a></li><li data-type='method'><a href="module-context.html#.context">context</a></li><li data-type='method'><a href="module-context.html#.dest">dest</a></li><li data-type='method'><a href="module-context.html#.now">now</a></li><li data-type='method'><a href="module-context.html#.samplingRate">samplingRate</a></li><li data-type='method'><a href="module-context.html#.timeToSamples">timeToSamples</a></li><li data-type='method'><a href="module-context.html#.when">when</a></li></ul></li><li><a href="module-effects.html">effects</a><ul class='methods'><li data-type='method'><a href="module-effects.html#.delay">delay</a></li><li data-type='method'><a href="module-effects.html#.dly">dly</a></li><li data-type='method'><a href="module-effects.html#.feedback">feedback</a></li><li data-type='method'><a href="module-effects.html#.mix">mix</a></li><li data-type='method'><a href="module-effects.html#.tremolo">tremolo</a></li></ul></li><li><a href="module-envelopes.html">envelopes</a><ul class='methods'><li data-type='method'><a href="module-envelopes.html#.adshr">adshr</a></li><li data-type='method'><a href="module-envelopes.html#.freqEnv">freqEnv</a></li><li data-type='method'><a href="module-envelopes.html#.perc">perc</a></li></ul></li><li><a href="module-filters.html">filters</a><ul class='methods'><li data-type='method'><a href="module-filters.html#.bandpass">bandpass</a></li><li data-type='method'><a href="module-filters.html#.filter">filter</a></li><li data-type='method'><a href="module-filters.html#.hipass">hipass</a></li><li data-type='method'><a href="module-filters.html#.lowpass">lowpass</a></li></ul></li><li><a href="module-instrument.html">instrument</a><ul class='methods'><li data-type='method'><a href="module-instrument.html#.inst">inst</a></li><li data-type='method'><a href="module-instrument.html#.withOptions">withOptions</a></li></ul></li><li><a href="module-load.html">load</a><ul class='methods'><li data-type='method'><a href="module-load.html#.decodeAudio">decodeAudio</a></li><li data-type='method'><a href="module-load.html#.fetch">fetch</a></li><li data-type='method'><a href="module-load.html#.load">load</a></li></ul></li><li><a href="module-oscillators.html">oscillators</a><ul class='methods'><li data-type='method'><a href="module-oscillators.html#.lfo">lfo</a></li><li data-type='method'><a href="module-oscillators.html#.osc">osc</a></li><li data-type='method'><a href="module-oscillators.html#.oscBank">oscBank</a></li><li data-type='method'><a href="module-oscillators.html#.saw">saw</a></li><li data-type='method'><a href="module-oscillators.html#.sine">sine</a></li><li data-type='method'><a href="module-oscillators.html#.square">square</a></li><li data-type='method'><a href="module-oscillators.html#.triangle">triangle</a></li></ul></li><li><a href="module-routing.html">routing</a><ul class='methods'><li data-type='method'><a href="module-routing.html#.add">add</a></li><li data-type='method'><a href="module-routing.html#.connect">connect</a></li></ul></li><li><a href="module-signals.html">signals</a><ul class='methods'><li data-type='method'><a href="module-signals.html#.bypass">bypass</a></li><li data-type='method'><a href="module-signals.html#.constant">constant</a></li><li data-type='method'><a href="module-signals.html#.gain">gain</a></li><li data-type='method'><a href="module-signals.html#.mult">mult</a></li><li data-type='method'><a href="module-signals.html#.scale">scale</a></li><li data-type='method'><a href="module-signals.html#.signal">signal</a></li></ul></li></ul><h3>Global</h3><ul><li><a href="global.html#dB">dB</a></li><li><a href="global.html#gainToDb">gainToDb</a></li><li><a href="global.html#note">note</a></li><li><a href="global.html#tempo">tempo</a></li></ul>
</nav>

<div id="main">
    
    <h1 class="page-title">oscillators.js</h1>
    

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/**
 * This module provides a concise API over the AudioContext's createOscillator
 * function
 * @example
 * import { sine, lfo, Hz, master } from 'synth-kit'
 *
 * master.start(sine(Hz('A4'), { detune: lfo(5, 10) }))
 * @module oscillators
 */
import { tempo } from './units'
import { context } from './context'
import { gain, mult } from './signals'
import { connect, add, plug, lifecycle } from './routing'
var OPTS = {}
function toArr (val) { return Array.isArray(val) ? val : [ val ] }

/**
 * Create an oscillator (an OscillatorNode)
 * @param {String} type - one of OscillatorNode [types]()
 * @param {Float|AudioNode} - the frequency (can be a number or a signal)
 * @param {Object} options - (Optional) Options can include:
 *
 * - detune: the detune in cents. Can be a number or a signal (see example)
 * - context: the audio context to use
 *
 * @return {AudioNode} the oscillator
 * @example
 * osc('sine', 880)
 * osc('square', 880, { detune: -10 })
 * osc('sawtooth', 1600, { detune: lfo(5, 50) }
 * // any signal can be the detune modulator
 * osc('sawtooth', 1600, { detune: connect(...) }
 */
export function osc (type, frequency, opts) {
  if (!opts) opts = OPTS
  var osc = context(opts).createOscillator()
  osc.type = type || 'sine'
  return lifecycle(osc, [
    plug('frequency', frequency, osc),
    plug('detune', opts.detune, osc)
  ])
}
/**
 * Create a sine oscillator. An alias for `osc('sine', ...)`
 * @function
 * @see osc
 * @param {Float|AudioNode} frequency - the frequency (can be a number or a signal)
 * @param {Object} options - (Optional) same as `osc` options
 * @return {AudioNode} the oscillator
 * @example
 * sine(1760)
 * sine(800, { detune: -50 })
 */
export const sine = osc.bind(null, 'sine')
/**
 * Create a sawtooth oscillator. An alias for `osc('sawtooth', ...)`
 * @function
 * @see osc
 * @param {Float|AudioNode} - the frequency (can be a number or a signal)
 * @param {Object} options - (Optional) same as `osc` options
 * @return {AudioNode} the oscillator
 * @example
 * saw(1760)
 * saw(440, { detune: lfo(5, 10) })
 */
export const saw = osc.bind(null, 'sawtooth')
/**
 * Create a square oscillator. An alias for `osc('square', ...)`
 * @function
 * @see osc
 * @param {Float|AudioNode} - the frequency (can be a number or a signal)
 * @param {Object} options - (Optional) same as `osc` options
 * @return {AudioNode} the oscillator
 * @example
 * square(1760, { context: offline() })
 */
export const square = osc.bind(null, 'square')
/**
 * Create a triangle oscillator. An alias for `osc('triangle', ...)`
 * @function
 * @see osc
 * @param {Float|AudioNode} - the frequency (can be a number or a signal)
 * @param {Object} options - (Optional) same as `osc` options
 * @return {AudioNode} the oscillator
 * @example
 * triangle(1760, { detune: -10 })
 */
export const triangle = osc.bind(null, 'triangle')

/**
 * Create an oscillator bank. It returns a signal composed of the sum of the
 * individual oscillators.
 *
 * @param {Array&lt;Float>} frequencies - an array with the frequencies
 * @param {Object} options - (Optional) options can include:
 *
 * - frequency: if provided, the frequencies will be multiplied by this value
 * - types: a value or an array of oscillator types. If the array is shorter
 * than the frequencies array, it's assumed to be circular.
 * - gains: a value or an array of gain values. If the array is shorter
 * than the frequencies array, it's assumed to be circular.
 *
 * @return {AudioNode}
 *
 * @example
 * // create three sines with unrelated frequencies:
 * oscBank([1345.387, 435.392, 899.432])
 * // create three sawtooth with related frequencies:
 * oscBank([ 1, 2, 2.4 ], { frequency: 400, types: 'sawtooth' })
 * // create two squares of 400 and 800 and two sawtooths of 600 and 1200
 * // (the types are cyclic)
 * oscBank([400, 600, 800, 1200], { types: ['square', 'sawtooth'] })
 * // specify gains
 * oscBank([440, 660], { gains: [0.6, 0.2] })
 */
export function oscBank (freqs, opts) {
  if (!opts) opts = OPTS
  var base = opts.frequency || 1
  var gains = toArr(opts.gains || 1)
  var types = toArr(opts.types || 'sine')
  var N = opts.normalize === false ? 1 : freqs.length

  var tl = types.length
  var gl = gains.length
  return connect(add(freqs.map(function (freq, i) {
    var src = osc(types[i % tl], base * freq)
    var g = gains[i % gl]
    return g === 1 ? src : connect(src, gain(g))
  })), gain(1 / N))
}

/**
 * Create a lfo. It's a decorated oscillator with some goodies to reduce
 * the boilerplate code with signal modulators
 *
 * @param {Integer} freq - the frequency
 * @param {Integer} amplitude - the amplitude
 * @param {Options} options - (Optional) Options can include:
 *
 * - context: the audio context to be used
 * - tempo: if provided, the freq parameter is the number of beats inside that tempo
 *
 * @example
 * master.start(sine(300, { detune: lfo(5, 10) }))
 * // too complicated?
 * master.start(sine(300, { detune: lfo(4, 10, { tempo: 120 }))
 */
export function lfo (freq, amp, o) {
  freq = freq || 7
  amp = amp || 1
  o = o || OPTS
  if (o.tempo) freq = tempo(o.tempo, freq)
  return mult(amp, osc(o.type || 'sine', freq))
}
</code></pre>
        </article>
    </section>




</div>

<br class="clear">

<footer>
    Documentation generated at Sun Oct 30 2016 11:24:39 GMT+0100 (CET)
</footer>

<script>prettyPrint();</script>
<script src="scripts/linenumber.js"></script>
</body>
</html>
