(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){(function(global){(function(global,factory){typeof exports==="object"&&typeof module!=="undefined"?factory(exports):typeof define==="function"&&define.amd?define(["exports"],factory):factory(global.SynthKit=global.SynthKit||{})})(this,function(exports){"use strict";var commonjsGlobal=typeof window!=="undefined"?window:typeof global!=="undefined"?global:typeof self!=="undefined"?self:{};function createCommonjsModule(fn,module){return module={exports:{}},fn(module,module.exports),module.exports}var window_1=createCommonjsModule(function(module){if(typeof window!=="undefined"){module.exports=window}else if(typeof commonjsGlobal!=="undefined"){module.exports=commonjsGlobal}else{module.exports={}}});var index=createCommonjsModule(function(module){var window=window_1;var Context=window.AudioContext||window.webkitAudioContext;if(Context)module.exports=new Context});var proto=Object.getPrototypeOf(Object.getPrototypeOf(index.createGain()));var _connect=proto.connect;proto.connect=function(){_connect.apply(this,arguments);return this};function context(ctx){return ctx||index}function dest(context){return(context||index).destination}function now(context){return(context||index).currentTime}function when(time,delay,ctx){return Math.max(now(ctx),time||0)+(delay||0)}var after=when.bind(0);function samplingRate(ctx){return context(ctx).sampleRate}function timeToSamples(secs,context){return secs*samplingRate(context)}function fillStr(s,num){return Array(num+1).join(s)}function isNum(x){return typeof x==="number"}function isStr(x){return typeof x==="string"}function isDef(x){return typeof x!=="undefined"}function midiToFreq(midi,tuning){return Math.pow(2,(midi-69)/12)*(tuning||440)}var REGEX=/^([a-gA-G])(#{1,}|b{1,}|x{1,}|)(-?\d*)\s*(.*)\s*$/;function regex(){return REGEX}var SEMITONES=[0,2,4,5,7,9,11];function parse(str,isTonic,tuning){if(typeof str!=="string")return null;var m=REGEX.exec(str);if(!m||!isTonic&&m[4])return null;var p={letter:m[1].toUpperCase(),acc:m[2].replace(/x/g,"##")};p.pc=p.letter+p.acc;p.step=(p.letter.charCodeAt(0)+3)%7;p.alt=p.acc[0]==="b"?-p.acc.length:p.acc.length;var pos=SEMITONES[p.step]+p.alt;p.chroma=pos<0?12+pos:pos%12;if(m[3]){p.oct=+m[3];p.midi=pos+12*(p.oct+1);p.freq=midiToFreq(p.midi,tuning)}if(isTonic)p.tonicOf=m[4];return p}var LETTERS="CDEFGAB";function acc(n){return!isNum(n)?"":n<0?fillStr("b",-n):fillStr("#",n)}function oct(n){return!isNum(n)?"":""+n}function build(s,a,o){if(s===null||typeof s==="undefined")return null;if(s.step)return build(s.step,s.alt,s.oct);if(s<0||s>6)return null;return LETTERS.charAt(s)+acc(a)+oct(o)}function midi(note){if((isNum(note)||isStr(note))&&note>=0&&note<128)return+note;var p=parse(note);return p&&isDef(p.midi)?p.midi:null}function freq(note,tuning){var m=midi(note);return m===null?null:midiToFreq(m,tuning)}var parser={parse:parse,build:build,regex:regex,midi:midi,freq:freq};var FNS=["letter","acc","pc","step","alt","chroma","oct"];FNS.forEach(function(name){parser[name]=function(src){var p=parse(src);return p&&isDef(p[name])?p[name]:null}});var index$1=parser;var pow=Math.pow;function tempo(bpm,sub){return bpm/60*(sub||1)}function note(name,base){return index$1.freq(name)}function hz(value,base){if(typeof value==="string"){base=base||440;return pow(2,(+value-69)/12)*base}else{return Math.abs(+value)}}function dB(db){return pow(2,db/6)}function gainToDb(gain){return 20*(Math.log(gain)/Math.LN10)}var OPTS={};function isA(t,x){return typeof x===t}function toArr(arr){return Array.isArray(arr)?arr:[arr]}var slice=Array.prototype.slice;var isArray=Array.isArray;var assign=Object.assign;function pluck(name,def){return function(obj){return obj[name]||def}}function connect(nodes){nodes=isArray(nodes)?nodes:slice.call(arguments);if(!nodes.length)return null;else if(nodes.length===1)return nodes[0];var first=nodes[0];if(!first.duration)first.duration=0;var last=nodes.reduce(function(src,dest){src.connect(dest);first.duration=Math.max(first.duration,dest.duration||0);return dest});first.connect=last.connect.bind(last);var node=lifecycle(first,nodes.slice(1));if(node.linked){node.start.then=function(time,node,deps){var dur=Math.min.apply(null,deps.map(pluck("duration",0)));if(dur)node.stop(time+dur)}}return node}function add(nodes){nodes=isArray(nodes)?nodes:slice.call(arguments);if(!nodes.length)return null;else if(nodes.length===1)return nodes[0];var context=nodes[0].context;var input=context.createGain();var output=context.createGain();nodes.forEach(function(node){if(node.numberOfInputs)input.connect(node);node.connect(output)});input.connect=output.connect.bind(output);return lifecycle(input,nodes)}function plug(name,value,node){if(typeof value==="undefined"){}else if(typeof value.connect==="function"){node[name].value=0;value.connect(node[name]);return value}else if(node[name]){node[name].value=value}}function lifecycle(node,dependents){var deps=dependents.filter(function(dep){return dep&&typeof dep.start==="function"});if(deps.length){var _start=node.start;var _stop=node.stop;node.linked=dependents;node.start=function(time){var res=_start?_start.call(node,time):void 0;deps.forEach(function(d){if(d.start)d.start(time)});if(node.start.then)node.start.then(time,node,dependents);return res};node.stop=function(time){var res=_stop?_stop.call(node,time):void 0;deps.forEach(function(d){if(d.stop)d.stop(time)});return res}}return node}function gain(gain,o){var amp=context(o?o.context:null).createGain();return lifecycle(amp,[plug("gain",gain,amp)])}function constant(value,o){var ctx=context(o?o.context:null);var source=ctx.createBufferSource();source.loop=true;source.buffer=ctx.createBuffer(1,2,ctx.sampleRate);var data=source.buffer.getChannelData(0);data[0]=data[1]=value;return source}function signal(value,opts){return connect(constant(1,opts),gain(value,opts)).start()}function bypass(o){return context(o?o.context:null).createGain()}function mult(value,signal,opts){return connect(signal,gain(value,opts))}function scale(min,max,source){var ctx=source;if(source.numberOfInputs)source=connect(constant(1,ctx),source);var delta=max-min;return add(constant(min,ctx),mult(delta,source))}function osc(type,frequency,o){if(!o)o=OPTS;var osc=context(o.context).createOscillator();osc.type=type||"sine";return lifecycle(osc,[plug("frequency",frequency,osc),plug("detune",o.detune,osc)])}const sine=osc.bind(null,"sine");const saw=osc.bind(null,"sawtooth");const square=osc.bind(null,"square");const triangle=osc.bind(null,"triangle");function oscBank(freqs,opts){if(!opts)opts=OPTS;var base=opts.frequency||1;var gains=toArr(opts.gains||1);var types=toArr(opts.types||"sine");var N=opts.normalize===false?1:freqs.length;var tl=types.length;var gl=gains.length;return connect(add(freqs.map(function(freq,i){var src=osc(types[i%tl],base*freq);var g=gains[i%gl];return g===1?src:connect(src,gain(g))})),gain(1/N))}function lfo(freq,amp,o){freq=freq||7;amp=amp||1;o=o||OPTS;if(o.tempo)freq=tempo(o.tempo,freq);return mult(amp,osc(o.type||"sine",freq))}function filter(type,frequency,o){o=o||OPTS;var filter=context(o.context).createBiquadFilter();filter.type=type||"lowpass";return lifecycle(filter,[plug("frequency",frequency,filter),plug("Q",o.Q,filter),plug("detune",o.detune,filter)])}const lowpass=filter.bind(null,"lowpass");const hipass=filter.bind(null,"highpass");const bandpass=filter.bind(null,"hipass");function load(url,ac){return fetch(url,"arraybuffer").then(decodeAudio(ac))}function fetch(url,type){type=type==="arraybuffer"?type:"text";return new Promise(function(resolve,reject){var xhr=new XMLHttpRequest;xhr.open("GET",url,true);xhr.responseType=type;xhr.onload=function(){if(xhr.response){resolve(xhr.response)}};xhr.onerror=reject;xhr.send()})}function decodeAudio(ac,arrayBuffer){if(arguments.length===1)return function(array){return decodeAudio(ac,array)};return new Promise(function(resolve,reject){ac.decodeAudioData(arrayBuffer,resolve,reject)})}function source(buffer,o){o=o||OPTS;var src=context(o.context).createBufferSource();src.buffer=isA("function",buffer)?buffer():buffer;if(!src.buffer)console.warn("Buffer not ready.");if(o.loop)src.loop=true;return lifecycle(src,[plug("detune",o.detune,src)])}function gen(generators,samples,o){samples=samples||2;o=o||OPTS;return function(){if(!Array.isArray(generators))generators=[generators];var reverse=o.reverse;var numOfChannels=generators.length;var ctx=context(o.context);var buffer=ctx.createBuffer(numOfChannels,samples,samplingRate(ctx));for(var ch=0;ch<numOfChannels;ch++){generateData(generators[ch],buffer.getChannelData(ch),samples,reverse)}return buffer}}function generateData(generator,data,samples,reverse){for(var i=0;i<samples;i++){data[i]=generator(reverse?samples-i:i)}}function white(samples,options){if(!isA("number",samples))samples=samplingRate(options);return source(gen(whiteGen,samples,options),options)}function whiteGen(){return Math.random()*2-1}function eachStage(stages,fn){stages.forEach(function(s){fn.apply(null,s)})}function perc(attack,decay,opts){var a=[[0,0,"set"],[attack||.01,1,"lin"],[decay||.2,0,"exp"]];return envelope(a,null,opts)}var ADSR=[.01,.1,.8,.3];function adsr(o){o=o||OPTS;var adsr=o.adsr||ADSR;if(!isA("number",o.attack))o.attack=adsr[0];if(!isA("number",o.decay))o.decay=adsr[1];if(!isA("number",o.sustain))o.sustain=adsr[2];if(!isA("number",o.release))o.release=adsr[3];var a=[[0,0,"set"],[o.attack,1,"lin"],[o.decay,o.sustain,"exp"]];var r=[[0,o.sustain,"set"],[o.release,0,"exp"]];return envelope(a,r,o)}function envelope(attEnvelope,relEnvelope,opts){var g=gain(0,opts);g.start=apply(g.gain,attEnvelope);if(!relEnvelope){g.duration=duration(attEnvelope)}else{g.stop=apply(g.gain,relEnvelope)}return g}function apply(param,contour){console.log("contour",contour.join(","));return function(when){eachStage(contour,function(time,value,type){when+=time;if(type==="set")param.setValueAtTime(value,when);else if(type==="lin")param.linearRampToValueAtTime(value,when);else if(type==="exp")param.exponentialRampToValueAtTime(value!==0?value:1e-5,when);else console.warn("Invalid stage type",time,value,type)})}}function duration(contour){return contour.reduce(function(dur,stage){return dur+stage[0]},0)}function mix(fx,wet,norm){if(arguments.length===1)return function(w,n){return mix(fx,w,n)};if(!isA("number",wet))wet=.5;var dry=norm===false?1:1-wet;return add(gain(dry),connect(fx,gain(wet)))}function feedback(amount,node,options){var feed=gain(amount,options);node.connect(feed);feed.connect(node);return node}function tremolo(rate,type,ac){type=type||"sine";return gain(osc(type,rate,ac),ac)}function dly(time,ac){var dly=context(ac).createDelay(5);return lifecycle(dly,[plug("delayTime",time,dly)])}function delay(time,filter$$1,feedAmount,ac){if(!isA("number",feedAmount))feedAmount=.3;filter$$1=isA("number",filter$$1)?lowpass(filter$$1,null,null,ac):filter$$1||bypass(ac);return feedback(feedAmount,dly(time,ac),filter$$1,ac)}var subtractive=withOptions(function(o){return connect(adsr(o),filter(o.filter),gain(o))},{defaults:{adsr:[.01,.1,.8,1],filter:{type:"lowpass",frequency:"follow",octaves:2,adsr:[.1,.1,.5,1]},gain:1},toOptions:function(value,opts){var o=Object.assign({},opts);if(isA("function",value))o.source=value;else if(value>1)o.frequency=value;else o.gain=value;return o},prepare:function(){}});function withOptions(fn,config){config=config||OPTS;return function(options){var toOptions=config.toOptions||freqAndContextToOpts;if(!isA("object",options))options=toOptions.apply(null,arguments);if(config.prepare)config.prepare(options);return fn(assign({},config.defaults,options))}}function freqAndContextToOpts(frequency,context){return{frequency:frequency,context:context}}function withDest(synth,dest){return function(value){var node=synth?synth(value):value;if(dest)node.connect(dest);return node}}var master=inst(null,dest());function inst(synth,destination,options){synth=withDest(synth,destination||dest());return tracker(synth,options||OPTS)}function tracker(synth,opts){var ob=observable({});var limit=opts?opts.maxVoices:0;var voices={limit:limit,all:{},nextId:0,current:0,pool:new Array(limit)};function track(node){node.id=voices.nextId++;voices.all[node.id]=node;on(node,"ended",function(){delete voices.all[node.id];ob.event("voices",Object.keys(voices.all),limit)});return node}ob.start=function(value,time,delay,duration){var node=synth(value);if(node.start){track(node);time=start(node,time,delay,duration).startedAt;ob.event("start",node.id,time);ob.event("voices",Object.keys(voices.all),limit)}return node};ob.stop=function(ids,time,delay){var t=0;ids=toArr(ids||ids===0?ids:Object.keys(voices.all));ids.forEach(function(id){if(voices.all[id]){if(!t)t=when(time,delay,voices.all[id].context);voices.all[id].stop(t)}})};return ob}function start(node,time,delay,duration){time=when(time,delay,context(node.context));node.start(time);node.startedAt=time;var d=duration||node.duration;if(d)node.stop(time+d);return node}function observable(obj){obj.on=on.bind(null,obj);obj.event=event.bind(null,obj);return obj}function on(target,name,callback){if(!name||name==="*")name="event";var prev=target["on"+name];target["on"+name]=function(){if(prev)prev.apply(null,arguments);callback.apply(null,arguments)};return target}function event(target,name){var args=slice.call(arguments,1);if(isA("function",target["on"+name]))target["on"+name].apply(null,args);if(isA("function",target.onevent))target.onevent.apply(null,args);return target}exports.context=context;exports.now=now;exports.dest=dest;exports.samplingRate=samplingRate;exports.timeToSamples=timeToSamples;exports.tempo=tempo;exports.note=note;exports.hz=hz;exports.dB=dB;exports.gainToDb=gainToDb;exports.connect=connect;exports.add=add;exports.constant=constant;exports.bypass=bypass;exports.gain=gain;exports.signal=signal;exports.mult=mult;exports.scale=scale;exports.osc=osc;exports.sine=sine;exports.saw=saw;exports.square=square;exports.triangle=triangle;exports.oscBank=oscBank;exports.lfo=lfo;exports.filter=filter;exports.lowpass=lowpass;exports.hipass=hipass;exports.bandpass=bandpass;exports.gen=gen;exports.source=source;exports.white=white;exports.load=load;exports.decodeAudio=decodeAudio;exports.fetch=fetch;exports.perc=perc;exports.mix=mix;exports.feedback=feedback;exports.tremolo=tremolo;exports.dly=dly;exports.delay=delay;exports.withOptions=withOptions;exports.subtractive=subtractive;exports.inst=inst;exports.master=master;Object.defineProperty(exports,"__esModule",{value:true})})}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{}],2:[function(require,module,exports){var _=require("..");var RATIOS=[.5,1.49882353,1,2,2.99764706,4,5.040941178,5.99529412,8];function b3(preset,frequency){if(typeof preset==="string")preset=b3.presets[preset]||b3.parse(preset);else if(!Array.isArray(preset))throw Error("Not valid B3 registration",preset);var osc=drawbars(preset);return frequency?osc(frequency):osc}b3.parse=function(str){return(str.replace(/[^12345678]/g,"")+"00000000").slice(0,9).split("").map(Math.abs)};b3.presets={gospel:b3.parse("88 8000 008"),blues:b3.parse("88 8800 000"),bluesB:b3.parse("88 5324 588"),booker:b3.parse("88 8630 000"),onions:b3.parse("80 8800 008"),smith:b3.parse("88 8000 000"),mcgriff:b3.parse("86 8600 006"),errol:b3.parse("80 0008 888"),genesis:b3.parse("33 6866 330")};function drawbars(preset){var gains=null;return function(frequency){gains=gains||preset.map(function(n){return _.dB(-3*(8-n))});return _.oscBank(frequency,RATIOS,["sine"],gains)}}module.exports=b3},{"..":1}],3:[function(require,module,exports){module.exports={Piano:["Acoustic Grand Piano","Bright Acoustic Piano","Electric Grand Piano","Electric Piano 1","Electric Piano 2","Clavichord","Harpsichord","Honkytonk Piano"],Organ:["Church Organ","Drawbar Organ","Reed Organ","Rock Organ","Percussive Organ"],Guitar:["Acoustic Guitar Nylon","Acoustic Guitar Steel","Electric Guitar Clean","Electric Guitar Jazz","Electric Guitar Muted","Distortion Guitar","Guitar Fret Noise","Guitar Harmonics","Overdriven Guitar"],Bass:["Acoustic Bass","Electric Bass Finger","Electric Bass Pick","Contrabass","Fretless Bass","Synth Bass 1","Synth Bass 2","Slap Bass 1","Slap Bass 2"],Strings:["Cello","Viola","Violin","Tremolo Strings","Pizzicato Strings","Synthstrings 1","Synthstrings 2"],Reed:["Soprano Sax","Alto Sax","Tenor Sax","Baritone Sax","Bassoon","Clarinet","Oboe"],Brass:["Brass Section","English Horn","French Horn","Muted Trumpet","Trombone","Trumpet","Tuba","Synthbrass 1","Synthbrass 2"],Ensemble:["Choir Aahs","Orchestra Hit","Orchestral Harp","String Ensemble 1","String Ensemble 2"],Pipe:["Flute","Ocarina","Pan Flute","Piccolo","Recorder","Whistle"],World:["Accordion","Tango Accordion","Bag Pipe","Banjo","Fiddle","Harmonica","Kalimba","Koto","Shakuhachi","Shamisen","Shanai","Sitar"],"Chromatic Percussion":["Celesta","Dulcimer","Glockenspiel","Marimba","Music Box","Xylophone","Tubular Bells","Vibraphone","Steel Drums","Tinkle Bell"],Percussion:["Agogo","Melodic Tom","Woodblock","Reverse Cymbal","Timpani","Synth Drum","Taiko Drum"],"Synth Lead":["Lead 1 Square","Lead 2 Sawtooth","Lead 3 Calliope","Lead 4 Chiff","Lead 5 Charang","Lead 6 Voice","Lead 7 Fifths","Lead 8 Bass Lead"],"Synth Pad":["Pad 1 New Age","Pad 2 Warm","Pad 3 Polysynth","Pad 4 Choir","Pad 5 Bowed","Pad 6 Metallic","Pad 7 Halo","Pad 8 Sweep"],"Sound Effects":["Applause","Bird Tweet","Blown Bottle","Breath Noise","Gunshot","Fx 1 Rain","Fx 2 Soundtrack","Fx 3 Crystal","Fx 4 Atmosphere","Fx 5 Brightness","Fx 6 Goblins","Fx 7 Echoes","Fx 8 Scifi","Helicopter","Seashore","Synth Voice","Telephone Ring","Voice Oohs"]}},{}],4:[function(require,module,exports){var _=require("..");var Note=require("note-parser");function is(t,x){return typeof x===t}var GLEITZ="https://gleitz.github.io/midi-js-soundfonts/";function isSoundfontURL(name){return/\.js(\?.*)?$/i.test(name)}function url(name,sf,format){if(isSoundfontURL(name))return name;format=format==="ogg"?"-ogg":"-mp3";sf=sf==="FluidR3_GM"?"FluidR3_GM/":"MusyngKite/";return GLEITZ+sf+name.toLowerCase().replace(/\s+/g,"_")+format+".js"}var LOAD_DEFAULTS={format:"mp3",soundfont:"MusyngKite",fetch:_.fetch,decodeAudio:_.decodeAudio};function load(name,options){var o=Object.assign({},options,LOAD_DEFAULTS);var promise=is("function",name.then)?name:o.fetch(url(name,o.soundfont,o.format),"text");return promise.then(decodeSoundfont(o.context,o.decodeAudio))}var INST_DEFAULTS={gain:1,filter:{type:"lowpass",frequency:"22000"},attack:.01,decay:.1,sustain:.8,release:.4};function instrument(name,config){var buffers=null;var sample=function(midi){if(buffers)return buffers[midi];console.warn('Instrument "'+name+'" not loaded yet.');return _.gen(function(){return 0},2)};var synth=function(o){console.log("sf synth",o);return _.connect(_.source(sample(o.midi),o),_.filter(o.filter.type,o.filter.frequency,o.filter),_.gain(o))};synth=_.withOptions(synth,{defaults:Object.assign({},INST_DEFAULTS,config),toOptions:toOptions,prepare:prepareOptions});var sf=_.inst(synth,_.dest());load(name,config).then(function(result){buffers=result;sf.event("ready",sf,name)});return sf}function toOptions(note,context){return is("number",note)?{midi:note,context:context}:{note:note,context:context}}function prepareOptions(o){var note=Note.parse(o.name||o.note);if(!o.note&&note)o.note=Note.build(note);if(!o.midi&&note)o.midi=note.midi;if(!o.frequency&&o.midi)o.frequency=Math.pow(2,(o.midi-69)/12)*440;if(!o.detune){o.detune=Math.floor(o.midi%1*100);if(o.detune)o.midi=Math.floor(o.midi)}return o}function decodeSoundfont(ac,decodeAudio){var ctx=_.context(ac);return function(content){var sf=parseMidijs(content);var names=Object.keys(sf);var promises=names.map(function(name){return Promise.resolve(sf[name]).then(decodeBase64Audio).then(decodeAudio(ctx))});return Promise.all(promises).then(function(bufferList){return names.reduce(function(buffers,name,i){buffers[Note.midi(name)]=bufferList[i];return buffers},{})})}}function parseMidijs(data){var begin=data.indexOf("MIDI.Soundfont.");if(begin<0)throw Error("Invalid MIDI.js Soundfont format");begin=data.indexOf("=",begin)+2;var end=data.lastIndexOf(",");return JSON.parse(data.slice(begin,end)+"}")}function decodeBase64Audio(source){var i=source.indexOf(",");return base64Decode(source.slice(i+1)).buffer}function b64ToUint6(nChr){return nChr>64&&nChr<91?nChr-65:nChr>96&&nChr<123?nChr-71:nChr>47&&nChr<58?nChr+4:nChr===43?62:nChr===47?63:0}function base64Decode(sBase64,nBlocksSize){var sB64Enc=sBase64.replace(/[^A-Za-z0-9\+\/]/g,"");var nInLen=sB64Enc.length;var nOutLen=nBlocksSize?Math.ceil((nInLen*3+1>>2)/nBlocksSize)*nBlocksSize:nInLen*3+1>>2;var taBytes=new Uint8Array(nOutLen);for(var nMod3,nMod4,nUint24=0,nOutIdx=0,nInIdx=0;nInIdx<nInLen;nInIdx++){nMod4=nInIdx&3;nUint24|=b64ToUint6(sB64Enc.charCodeAt(nInIdx))<<18-6*nMod4;if(nMod4===3||nInLen-nInIdx===1){for(nMod3=0;nMod3<3&&nOutIdx<nOutLen;nMod3++,nOutIdx++){taBytes[nOutIdx]=nUint24>>>(16>>>nMod3&24)&255}nUint24=0}}return taBytes}module.exports={url:url,load:load,instrument:instrument}},{"..":1,"note-parser":7}],5:[function(require,module,exports){var _=require("..");function snare(){return _.connect(_.white(),_.perc())}module.exports={snare:snare}},{"..":1}],6:[function(require,module,exports){var SynthKit=require(".");window.log=function(name){return console.log.bind(console,name)};SynthKit.start=SynthKit.master.start;SynthKit.stop=SynthKit.master.stop;SynthKit.b3=require("./instruments/b3");SynthKit.sf=require("./instruments/soundfont").instrument;SynthKit.tr808=require("./instruments/tr808");var sfnames=require("./instruments/sf-names.json");SynthKit.sf.names=function(group,num){return!group?Object.keys(sfnames):num?sfnames[group][num-1]:sfnames[group]};SynthKit.sf.search=function(str){str=str.toLowerCase();var results=[];Object.keys(sfnames).forEach(function(group){sfnames[group].forEach(function(name){if(name.toLowerCase().includes(str))results.push(name)})});return results};SynthKit.live=function(){var names=[];Object.keys(SynthKit).forEach(function(name){window[name]=SynthKit[name];names.push(name)});window.inst=function(synth,dest,opts){var i=SynthKit.inst(synth,dest,opts);i.on("ready",function(_,name){console.log("Instrument ready: ",name)});return i};console.log("SynthKit live",10,names.length);console.log(names.join(", "))};module.exports=SynthKit},{".":1,"./instruments/b3":2,"./instruments/sf-names.json":3,"./instruments/soundfont":4,"./instruments/tr808":5}],7:[function(require,module,exports){"use strict";function fillStr(s,num){return Array(num+1).join(s)}function isNum(x){return typeof x==="number"}function isStr(x){return typeof x==="string"}function isDef(x){return typeof x!=="undefined"}function midiToFreq(midi,tuning){return Math.pow(2,(midi-69)/12)*(tuning||440)}var REGEX=/^([a-gA-G])(#{1,}|b{1,}|x{1,}|)(-?\d*)\s*(.*)\s*$/;function regex(){return REGEX}var SEMITONES=[0,2,4,5,7,9,11];function parse(str,isTonic,tuning){if(typeof str!=="string")return null;var m=REGEX.exec(str);if(!m||!isTonic&&m[4])return null;var p={letter:m[1].toUpperCase(),acc:m[2].replace(/x/g,"##")};p.pc=p.letter+p.acc;p.step=(p.letter.charCodeAt(0)+3)%7;p.alt=p.acc[0]==="b"?-p.acc.length:p.acc.length;var pos=SEMITONES[p.step]+p.alt;p.chroma=pos<0?12+pos:pos%12;if(m[3]){p.oct=+m[3];p.midi=pos+12*(p.oct+1);p.freq=midiToFreq(p.midi,tuning)}if(isTonic)p.tonicOf=m[4];return p}var LETTERS="CDEFGAB";function acc(n){return!isNum(n)?"":n<0?fillStr("b",-n):fillStr("#",n)}function oct(n){return!isNum(n)?"":""+n}function build(s,a,o){if(s===null||typeof s==="undefined")return null;if(s.step)return build(s.step,s.alt,s.oct);if(s<0||s>6)return null;return LETTERS.charAt(s)+acc(a)+oct(o)}function midi(note){if((isNum(note)||isStr(note))&&note>=0&&note<128)return+note;var p=parse(note);return p&&isDef(p.midi)?p.midi:null}function freq(note,tuning){var m=midi(note);return m===null?null:midiToFreq(m,tuning)}var parser={parse:parse,build:build,regex:regex,midi:midi,freq:freq};var FNS=["letter","acc","pc","step","alt","chroma","oct"];FNS.forEach(function(name){parser[name]=function(src){var p=parse(src);return p&&isDef(p[name])?p[name]:null}});module.exports=parser},{}]},{},[6]);